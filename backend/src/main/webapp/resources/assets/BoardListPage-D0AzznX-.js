import{b as _}from"./boardApi-DQiNNCaJ.js";import{h as C}from"./moment-C5S46NFB.js";import{u as V,c as p,a as B,r as N,h as D,p as I,b as d,d as t,e as m,F as L,q as Y,j as b,k as n,l as v,s as A,f as R,x as g,i as F,o as u,t as i}from"./index-8tEzo_Yo.js";const M={class:"table table-striped"},P={class:"my-5 d-flex"},S={class:"flex-grow-1 text-center"},U={__name:"BoardListPage",setup(T){const f=V(),w=p(()=>f.isLogin);p(()=>f.username);const a=D(),q=F(),r=B({}),x=p(()=>r.value.list),s=N({page:parseInt(a.query.page)||1,amount:parseInt(a.query.amount)||10}),h=async l=>{q.push({query:{page:l,amount:s.amount}})};I(a,async l=>{console.log("WATCH호출됨...자동 변경된 객체 page>> ",a.query.page),s.page=parseInt(a.query.page),s.amount=parseInt(a.query.amount),await c(s)});const c=async l=>{try{r.value=await _.getList(l),console.log(r.value)}catch{}};return c(s),(l,e)=>{const y=v("router-link"),k=v("vue-awesome-paginate");return u(),d("div",null,[e[7]||(e[7]=t("h1",{class:"mb-3"},[t("i",{class:"fa-solid fa-paste"}),m(" 게시글 목록")],-1)),t("table",M,[e[1]||(e[1]=t("thead",null,[t("tr",null,[t("th",{style:{width:"60px"}},"No"),t("th",null,"제목"),t("th",{style:{width:"100px"}},"작성자"),t("th",{style:{width:"120px"}},"작성일")])],-1)),t("tbody",null,[(u(!0),d(L,null,Y(x.value,o=>(u(),d("tr",{key:o.no},[t("td",null,i(o.no),1),t("td",null,[b(y,{to:{name:"board/detail",params:{no:o.no},query:g(a).query}},{default:n(()=>[m(i(o.title),1)]),_:2},1032,["to"])]),t("td",null,i(o.writer),1),t("td",null,i(g(C)(o.regDate).format("YYYY - MM - DD")),1)]))),128))])]),t("div",P,[t("div",S,[b(k,{"total-items":r.value.totalCount,"items-per-page":s.amount,"max-pages-shown":5,"show-ending-buttons":!0,modelValue:s.page,"onUpdate:modelValue":e[0]||(e[0]=o=>s.page=o),onClick:h},{"first-page-button":n(()=>e[2]||(e[2]=[t("i",{class:"fa-solid fa-backward-fast"},null,-1)])),"prev-button":n(()=>e[3]||(e[3]=[t("i",{class:"fa-solid fa-caret-left"},null,-1)])),"next-button":n(()=>e[4]||(e[4]=[t("i",{class:"fa-solid fa-caret-right"},null,-1)])),"last-page-button":n(()=>e[5]||(e[5]=[t("i",{class:"fa-solid fa-forward-fast"},null,-1)])),_:1},8,["total-items","items-per-page","modelValue"])]),t("div",null,[w.value?(u(),A(y,{key:0,to:{name:"board/create",query:g(a).query},class:"btn btn-primary"},{default:n(()=>e[6]||(e[6]=[t("i",{class:"fa-solid fa-pen-to-square"},null,-1),m(" 글 작성")])),_:1,__:[6]},8,["to"])):R("",!0)])])])}}};export{U as default};
