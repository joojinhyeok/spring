import{f as g,r as w,a as y,c as n,b as a,d as t,h as _,t as m,w as d,v as u,i as h,j as k,k as x,e as V,u as S,o as p}from"./index-DydowJ4N.js";import{a as N}from"./authApi-DCGGRAlT.js";const P={class:"mt-5 mx-auto",style:{width:"500px"}},B={class:"mb-3 mt-3"},C={class:"mb-3 mt-3"},j={class:"mb-3 mt-3"},A={class:"mb-3"},D={key:0,class:"text-danger"},E={class:"text-center"},M=["disabled"],$={__name:"ProfilePage",setup(T){const f=S(),o=g(),r=w(null),c=`/api/member/${o.username}/avatar`,e=y({username:o.username,email:o.email,password:"",avatar:null}),v=async()=>{if(confirm("수정하시겠습니까?")){r.value.files.length>0&&(e.avatar=r.value.files[0]);try{await N.update(e),error.value="",o.changeProfile(e),f.push("/"),alert("정보를 수정하였습니다.")}catch(l){error.value=l.response.data}}};return(l,s)=>{const b=x("router-link");return p(),n("div",P,[s[7]||(s[7]=a("h1",null,[a("i",{class:"fa-solid fa-user-gear my-3"}),t(" 회원 정보")],-1)),a("form",{onSubmit:V(v,["prevent"])},[a("div",B,[a("img",{src:c,class:"avatar avatar-lg me-4"}),t(" "+m(e.username),1)]),a("div",C,[s[2]||(s[2]=a("label",{for:"avatar",class:"form-label"},[a("i",{class:"fa-solid fa-user-astronaut"}),t(" 아바타 이미지: ")],-1)),a("input",{type:"file",class:"form-control",ref_key:"avatar",ref:r,id:"avatar",accept:"image/png, image/jpeg"},null,512)]),a("div",j,[s[3]||(s[3]=a("label",{for:"email",class:"form-label"},[a("i",{class:"fa-solid fa-envelope"}),t(" email ")],-1)),d(a("input",{type:"email",class:"form-control",placeholder:"Email",id:"email","onUpdate:modelValue":s[0]||(s[0]=i=>e.email=i)},null,512),[[u,e.email]])]),a("div",A,[s[4]||(s[4]=a("label",{for:"password",class:"form-label"},[a("i",{class:"fa-solid fa-lock"}),t(" 비밀번호: ")],-1)),d(a("input",{type:"password",class:"form-control",placeholder:"비밀번호",id:"password","onUpdate:modelValue":s[1]||(s[1]=i=>e.password=i)},null,512),[[u,e.password]])]),l.error?(p(),n("div",D,m(l.error),1)):_("",!0),a("div",E,[a("button",{type:"submit",class:"btn btn-primary mt-4 me-3",disabled:l.disableSubmit},s[5]||(s[5]=[a("i",{class:"fa-solid fa-user-plus"},null,-1),t(" 확인 ")]),8,M),h(b,{class:"btn btn-primary mt-4",to:"/auth/changepassword"},{default:k(()=>s[6]||(s[6]=[a("i",{class:"fa-solid fa-lock"},null,-1),t(" 비밀번호 변경 ")])),_:1,__:[6]})])],32)])}}};export{$ as default};
